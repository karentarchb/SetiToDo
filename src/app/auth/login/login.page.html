<app-auth-layout title="SetiToDo" subtitle="Inicia sesión para continuar">
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <mat-form-field appearance="outline">
      <mat-label>Correo Electrónico</mat-label>
      <input
        matInput
        type="email"
        formControlName="email"
        placeholder="ejemplo@correo.com">
      <mat-icon matPrefix>email</mat-icon>
      <mat-error *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
        {{ getEmailErrorMessage() }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="password-field">
      <mat-label>Contraseña</mat-label>
      <input
        matInput
        [type]="hidePassword ? 'password' : 'text'"
        formControlName="password"
        placeholder="Mínimo 6 caracteres">
      <mat-icon matPrefix>lock</mat-icon>
      <button
        mat-icon-button
        matSuffix
        type="button"
        (click)="hidePassword = !hidePassword"
        class="eye-icon">
        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
        {{ getPasswordErrorMessage() }}
      </mat-error>
    </mat-form-field>

    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="isLoading">
      <mat-spinner *ngIf="isLoading" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
      {{ isLoading ? 'Iniciando sesión...' : 'Iniciar Sesión' }}
    </button>

    <div class="auth-link-container">
      <span class="auth-link-text">¿No tienes una cuenta?</span>
      <a class="auth-link-action" (click)="navigateToRegister()">Regístrate</a>
    </div>
  </form>
</app-auth-layout>
